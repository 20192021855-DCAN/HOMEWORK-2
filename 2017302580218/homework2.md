## HomeWork 2

### P7.
> 	在这个习题中，我们考虑从主机A向主机B通过分组交换网发送语音（VoIP）。主机A将模拟语音 转换为传输中的64kbps数字比特流。然后主机A将这些比特分为56字节的分组。A和B之间有一条 链路：它的传输速率是2Mbps,传播时延是10ms。一旦A收集了一个分组，就将它向主机B发送。 一旦主机B接收到一个完整的分组，它将该分组的比特转换成模拟信号。从比特产生（从位于主机 A的初始模拟信号起）的时刻起，到该比特被解码（在主机B上作为模拟信号的一部分），花了多少时间？

**解：**总的时间分为三个部分，第一部分先是 A收集一个分组所需的时间，第二部分是传输一个分组所需的时间，最后一部分则是该分组传播到主机B的传播时延。

- 计算：$t= t_{collect}+t_{transmit}+t_{propagation} \\=  \\=   {2Mbps} + 10ms=7ms + 0.224ms + 10ms \\= 17.224ms$


### P13.
> 	一台分组交换机接收一个分组并决定该分组应当转发的出链路。当某分组到达时，另一个分组正在该出链路上被发送到一半，还有4个其他分组正等待传输。这些分组以到达的次序传输。假定所有分组是1500字节并且链路速率是2Mbps。该分组的排队时延是多少？在更一般的情况下，当所有分组的长度是L，传输速率是R，当前正在传输的分组已经传输了x比特，并且已经在队列中有n个分组，其排队时延是多少？

**解：**
- a.该分组需要排队的时间可以分为两个部分，其一是正发送到一半的分组还需要的剩余传输时间，另一部分是4个正在排队的分组所需的传输时间
	
	计算：$t=t_{current}+t_{four}\\= \frac{1500 * 8b}{2 * 2Mbps} + \frac{1500 * 8b * 4}{2Mbps} \\= 3ms + 24ms = 27ms$
- b.按照 a的方式来分成两部分排队时间，可以得到一般情况下排队时延为$t_{delay} = t_{current} + t_{remain}=\frac{L-x}{R} + \frac{nL}{R}=\frac{(n+1)L-x}{R}$

### P25.
>	假定两台主机A和B相隔20000km，由一条直接的R=2Mbps的链路相连。假定跨越该链路的传播速率是2.5×108m/s。
a.计算带宽-时延积$R·t_{prop}$。
b.考虑从主机A到主机B发送一个800000比特的文件。假定该文件作为一个大的报文连续发送。在任何给定的时间，在链路上具有的比特数量最大值是多少？
c.给出带宽-时延积的一种解释。
d.在该链路上一个比特的宽度（以米计）是多少？它比一个足球场更长吗？
e.根据传播速率s、带宽R和链路m的长度，推导出一个比特宽度的一般表示式

**解：**

- a. $R * t_{prop}=2Mbps*\frac{20000km}{2.5*10^{8}m/s}=160kb$
- b.文件全部传输完成需要时间为 $t_{all-transmit}=\frac{800000b}{2Mbps}=0.4s$, 而传播时延为$t_{prop}=\frac{20000km}{2.5*10^{8}m/s}=0.08s$, 小于文件全部传输的时间，所以在链路上具有的最大比特数量应该是传播时延内传输出去的比特数，即$Num_{max}=R * t_{prop}=160000$
- c. 带宽-时延积是某一时间链路上具有的比特最大数量
- d.比特宽度 $W=\frac{D_{AB}}{Num_{max}}=\frac{20000km}{160000}=125m$，国际足联规定的标准足球场场地大小为 105米 * 68米，所以比特宽度与一个足球场差不多大或者比它还大
- e.
	1. 如果要传播的比特数 L 比较小而m又比较大，导致传播时延 $t_{prop}=m/s$ 大于传输时延$t_{trans}=L/R$，那么链路上最大比特数就只有 L。
	2. 要传输的比特数L正常的情况下，传播时延比传输时延小时，链路上的比特最大量就是带宽-时延积的值 $R * t_{prop}$，故比特宽度应该为$W_{bit}=\frac{m}{R * t_{prop}}=\frac{m}{R*\frac{m}{s}}=\frac{s}{R}$

### P31.
>a.考虑从源到目的地发送该报文且没有报文分段。从源主机到第一台分组交换机移动报文需要多长时间？记住，每台交换机均使用存储转发分组交换，从源主机移动该报文到目的主机需要多长时间？
b.现在假定该报文被分段为800个分组，每个分组10000比特长。从源主机移动第一个分组到第一台交换机需要多长时间？从第一台交换机发送第一个分组到第二台交换机，从源主机发送第二个分组到第一台交换机各需要多长时间？什么时候第二个分组能被第一台交换机全部收到？
c.当进行报文分段时，从源主机向目的主机移动该文件需要多长时间？将该结果与(a)的答案进行比较并解释之。
d.除了减小时延外，使用报文分段还有什么原因？
e.讨论报文分段的缺点。

**解：**
- a.源主机到第一台分组交换机移动报文需要的时间为 $t_{src-switch}=\frac{8*10^{6}b}{2Mbps}=4s$，源主机移动报文到目的主机需要的时间为$t_{src-dest}=t_{src-swtich}+t_{switch-switch}+t_{switch-dest}=3 * \frac{8*10^{6}b}{2Mbps}=12s$
- b.移动第一个分组需要的时间$t_{first}=\frac{10000b}{2Mbps}=5ms$；由于图中三条链路的带宽都相同，所以从第一台交换机发送第一个分组到第二台交换机和从源主机发送第二个分组到第一台交换机所需要的时间都是 5ms；第一台交换机完全收到第二个分组的时间为收到第一个分组的时间的两倍即 10ms
- c.关注最后一个分组，由于最后一个分组必须等待前面799个分组都从第一个交换机送出去了才能开始向第一个交换机发送，这时经过了$799 * 5ms$的时间，最后一个分组经过3个 5ms的时间传到目的地，，共经过的时间为$t_{total} = 799*5ms+3*5ms=4.01s$；这个时间比不进行报文分段传输的时间少了很多，因为报文本身比特大，在前一个交换机等待的时间过长，后一个交换机只能闲置；而进行报文分段后每个分组的比特量较小，等待少许时间后就会传出去给下一个交换机，等待时间很少，且各个交换机可以并行处理，三条链路可以同时得到利用。
- d.  i.减小单位交换机处理分组所承担的压力，例如内存、硬盘资源的消耗量，降低交换机崩溃的风险
  ii. 让多个交换机同时处理分组
  iii. 当某个比特丢失或者发生错位时，整个文件需要重新传送，会消耗大量的时间，如果分组传送时需要错误只需要重新传送出错的分组即可
- e. 报文分段后传送的都是一个个分组，需要加上额外的信息如序列号等，以使得在目的地接收到分组后以正确的序列组织合并成原文件，这时该文件总体大小会比原主机发送时的文件大一些
